/*!
 * Copyright 2023 Adobe. All rights reserved.
 *
 * This file is licensed to you under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License. You may obtain a copy
 * of the License at <http://www.apache.org/licenses/LICENSE-2.0>
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS
 * OF ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 */

/**
 * @namespace spectrum
 * @component Textfield
 */
.spectrum-Textfield {
    /* set input line-height to the height of the textfield - prevents the cutting off of diacritics in some languages */
    /* disallow mod for max compatibility */
    --spectrum-textfield-input-line-height: var(--spectrum-textfield-height);
    --spectrum-texfield-animation-duration: var(--spectrum-animation-duration-100);

    /* disallow mod for max compatibility */
    --spectrum-textfield-input-line-height: var(--spectrum-textfield-height);

    --spectrum-texfield-animation-duration: var(--spectrum-animation-duration-100);

    --spectrum-textfield-width: 240px; /* override per api */
    --spectrum-textfield-min-width: var(--spectrum-text-field-minimum-width-multiplier);
    --spectrum-textfield-corner-radius: var(--spectrum-corner-radius-100);

    /* default height */
    --spectrum-textfield-height: var(--spectrum-component-height-100);

    /* default spacing */
    --spectrum-textfield-spacing-inline: var(--spectrum-component-edge-to-text-100);
    --spectrum-textfield-spacing-inline-quiet: var(--spectrum-field-edge-to-text-quiet);
    --spectrum-textfield-spacing-block-start: var(--spectrum-component-top-to-text-100);
    --spectrum-textfield-spacing-block-end: var(--spectrum-component-bottom-to-text-100);
    --spectrum-textfield-spacing-block-quiet: var(--spectrum-field-edge-to-border-quiet);

    /* default icon size */
    --spectrum-textfield-icon-size-invalid: var(--spectrum-workflow-icon-size-100);
    --spectrum-textfield-icon-size-valid: var(--spectrum-checkmark-icon-size-100);

    /* default icon spacing - invalid */
    --spectrum-textfield-icon-spacing-inline-start-invalid: var(--spectrum-field-text-to-alert-icon-medium);
    --spectrum-textfield-icon-spacing-inline-end-invalid: var(--spectrum-field-edge-to-alert-icon-medium);
    --spectrum-textfield-icon-spacing-inline-end-quiet-invalid: var(--spectrum-field-edge-to-alert-icon-quiet);
    --spectrum-textfield-icon-spacing-block-invalid: var(--spectrum-field-top-to-alert-icon-medium);

    /* default icon spacing - valid */
    --spectrum-textfield-icon-spacing-inline-start-valid: var(--spectrum-field-text-to-validation-icon-medium);
    --spectrum-textfield-icon-spacing-inline-end-valid: var(--spectrum-field-edge-to-validation-icon-medium);
    --spectrum-textfield-icon-spacing-inline-end-quiet-valid: var(--spectrum-field-edge-to-validation-icon-quiet);
    --spectrum-textfield-icon-spacing-block-valid: var(--spectrum-field-top-to-validation-icon-medium);

    /* font styles */
    --spectrum-textfield-font-family: var(--spectrum-sans-font-family-stack);
    --spectrum-textfield-font-weight: var(--spectrum-regular-font-weight);
    --spectrum-textfield-placeholder-font-size: var(--spectrum-font-size-100);

    /* character count */
    --spectrum-textfield-character-count-font-family: var(--spectrum-sans-font-family-stack);
    --spectrum-textfield-character-count-font-weight: var(--spectrum-regular-font-weight);
    --spectrum-textfield-character-count-font-size: var(--spectrum-font-size-75);
    --spectrum-textfield-character-count-spacing-inline: var(--spectrum-spacing-200);
    --spectrum-textfield-character-count-spacing-block: var(--spectrum-component-bottom-to-text-75);
    --spectrum-textfield-character-count-spacing-inline-side: var(--spectrum-side-label-character-count-to-field);
    --spectrum-textfield-character-count-spacing-block-side: var(
        --spectrum-side-label-character-count-top-margin-medium
    );

    /* focus indicator */
    --spectrum-textfield-focus-indicator-width: var(--spectrum-focus-indicator-thickness);
    --spectrum-textfield-focus-indicator-gap: var(--spectrum-focus-indicator-gap);

    /*** Colors ***/
    --spectrum-textfield-background-color: var(--spectrum-gray-50);

    /* Text Colors */
    --spectrum-textfield-text-color-default: var(--spectrum-neutral-content-color-default);
    --spectrum-textfield-text-color-hover: var(--spectrum-neutral-content-color-hover);
    --spectrum-textfield-text-color-focus: var(--spectrum-neutral-content-color-focus);
    --spectrum-textfield-text-color-focus-hover: var(--spectrum-neutral-content-color-focus-hover);
    --spectrum-textfield-text-color-keyboard-focus: var(--spectrum-neutral-content-color-key-focus);

    /* Read Only Text Color */
    --spectrum-textfield-text-color-readonly: var(--spectrum-neutral-content-color-default);

    /* Disabled Colors */
    --spectrum-textfield-background-color-disabled: var(--spectrum-disabled-background-color);
    --spectrum-textfield-border-color-disabled: var(--spectrum-disabled-border-color);
    --spectrum-textfield-text-color-disabled: var(--spectrum-disabled-content-color);

    /* Invalid Colors */
    --spectrum-textfield-border-color-invalid-default: var(--spectrum-negative-border-color-default);
    --spectrum-textfield-border-color-invalid-hover: var(--spectrum-negative-border-color-hover);
    --spectrum-textfield-border-color-invalid-focus: var(--spectrum-negative-border-color-focus);
    --spectrum-textfield-border-color-invalid-focus-hover: var(--spectrum-negative-border-color-focus-hover);
    --spectrum-textfield-border-color-invalid-keyboard-focus: var(--spectrum-negative-border-color-key-focus);
    --spectrum-textfield-icon-color-invalid: var(--spectrum-negative-visual-color);

    --spectrum-textfield-text-color-invalid: var(--spectrum-neutral-content-color-default);

    /* Valid Colors */
    --spectrum-textfield-text-color-valid: var(--spectrum-neutral-content-color-default);
    --spectrum-textfield-icon-color-valid: var(--spectrum-positive-visual-color);

    /* Focus Indicator Color */
    --spectrum-textfield-focus-indicator-color: var(--spectrum-focus-indicator-color);

    /* Text Area / Multiline */
    --spectrum-text-area-min-inline-size: var(--spectrum-text-area-minimum-width);
    --spectrum-text-area-min-block-size: var(--spectrum-text-area-minimum-height);
    --spectrum-text-area-min-block-size-quiet: var(--spectrum-component-height-100);
}

/********* Text field t-shirt sizes *********/
.spectrum-Textfield--sizeS {
    --spectrum-textfield-height: var(--spectrum-component-height-75);
    --spectrum-textfield-label-spacing-block-quiet: var(--spectrum-field-label-to-component-quiet-small);
    --spectrum-textfield-label-spacing-inline-side-label: var(--spectrum-spacing-100);
    --spectrum-textfield-placeholder-font-size: var(--spectrum-font-size-75);
    --spectrum-textfield-spacing-inline: var(--spectrum-component-edge-to-text-75);
    --spectrum-textfield-icon-size-invalid: var(--spectrum-workflow-icon-size-75);
    --spectrum-textfield-icon-size-valid: var(--spectrum-checkmark-icon-size-75);
    --spectrum-textfield-icon-spacing-inline-end-invalid: var(--spectrum-field-edge-to-alert-icon-small);
    --spectrum-textfield-icon-spacing-inline-end-valid: var(--spectrum-field-edge-to-validation-icon-small);
    --spectrum-textfield-icon-spacing-block-invalid: var(--spectrum-field-top-to-alert-icon-small);
    --spectrum-textfield-icon-spacing-block-valid: var(--spectrum-field-top-to-validation-icon-small);
    --spectrum-textfield-icon-spacing-inline-start-invalid: var(--spectrum-field-text-to-alert-icon-small);
    --spectrum-textfield-icon-spacing-inline-start-valid: var(--spectrum-field-text-to-validation-icon-small);
    --spectrum-textfield-character-count-font-size: var(--spectrum-font-size-75);
    --spectrum-textfield-character-count-spacing-block: var(--spectrum-component-bottom-to-text-75);
    --spectrum-textfield-character-count-spacing-block-quiet: var(--spectrum-character-count-to-field-quiet-small);
    --spectrum-textfield-character-count-spacing-block-side: var(
        --spectrum-side-label-character-count-top-margin-small
    );

    /* Text Area / Multiline size small */
    --spectrum-text-area-min-block-size-quiet: var(--spectrum-component-height-75);
}

.spectrum-Textfield--sizeM {
    --spectrum-textfield-height: var(--spectrum-component-height-100);
    --spectrum-textfield-label-spacing-block-quiet: var(--spectrum-field-label-to-component-quiet-medium);
    --spectrum-textfield-label-spacing-inline-side-label: var(--spectrum-spacing-200);
    --spectrum-textfield-placeholder-font-size: var(--spectrum-font-size-100);
    --spectrum-textfield-spacing-inline: var(--spectrum-component-edge-to-text-100);
    --spectrum-textfield-icon-size-invalid: var(--spectrum-workflow-icon-size-100);
    --spectrum-textfield-icon-size-valid: var(--spectrum-checkmark-icon-size-100);
    --spectrum-textfield-icon-spacing-inline-end-invalid: var(--spectrum-field-edge-to-alert-icon-medium);
    --spectrum-textfield-icon-spacing-inline-end-valid: var(--spectrum-field-edge-to-validation-icon-medium);
    --spectrum-textfield-icon-spacing-block-invalid: var(--spectrum-field-top-to-alert-icon-medium);
    --spectrum-textfield-icon-spacing-block-valid: var(--spectrum-field-top-to-validation-icon-medium);
    --spectrum-textfield-icon-spacing-inline-start-invalid: var(--spectrum-field-text-to-alert-icon-medium);
    --spectrum-textfield-icon-spacing-inline-start-valid: var(--spectrum-field-text-to-validation-icon-medium);
    --spectrum-textfield-character-count-font-size: var(--spectrum-font-size-75);
    --spectrum-textfield-character-count-spacing-block: var(--spectrum-component-bottom-to-text-75);
    --spectrum-textfield-character-count-spacing-block-quiet: var(--spectrum-character-count-to-field-quiet-medium);
    --spectrum-textfield-character-count-spacing-block-side: var(
        --spectrum-side-label-character-count-top-margin-medium
    );

    /* Text Area / Multiline size medium */
    --spectrum-text-area-min-block-size-quiet: var(--spectrum-component-height-100);
}

.spectrum-Textfield--sizeL {
    --spectrum-textfield-height: var(--spectrum-component-height-200);
    --spectrum-textfield-label-spacing-block-quiet: var(--spectrum-field-label-to-component-quiet-large);
    --spectrum-textfield-label-spacing-inline-side-label: var(--spectrum-spacing-200);
    --spectrum-textfield-placeholder-font-size: var(--spectrum-font-size-200);
    --spectrum-textfield-spacing-inline: var(--spectrum-component-edge-to-text-200);
    --spectrum-textfield-icon-size-invalid: var(--spectrum-workflow-icon-size-200);
    --spectrum-textfield-icon-size-valid: var(--spectrum-checkmark-icon-size-200);
    --spectrum-textfield-icon-spacing-inline-end-invalid: var(--spectrum-field-edge-to-alert-icon-large);
    --spectrum-textfield-icon-spacing-inline-end-valid: var(--spectrum-field-edge-to-validation-icon-large);
    --spectrum-textfield-icon-spacing-block-invalid: var(--spectrum-field-top-to-alert-icon-large);
    --spectrum-textfield-icon-spacing-block-valid: var(--spectrum-field-top-to-validation-icon-large);
    --spectrum-textfield-icon-spacing-inline-start-invalid: var(--spectrum-field-text-to-alert-icon-large);
    --spectrum-textfield-icon-spacing-inline-start-valid: var(--spectrum-field-text-to-validation-icon-large);
    --spectrum-textfield-character-count-font-size: var(--spectrum-font-size-100);
    --spectrum-textfield-character-count-spacing-block: var(--spectrum-component-bottom-to-text-100);
    --spectrum-textfield-character-count-spacing-block-quiet: var(--spectrum-character-count-to-field-quiet-large);
    --spectrum-textfield-character-count-spacing-block-side: var(
        --spectrum-side-label-character-count-top-margin-large
    );

    /* Text Area / Multiline size large */
    --spectrum-text-area-min-block-size-quiet: var(--spectrum-component-height-200);
}

.spectrum-Textfield--sizeXL {
    --spectrum-textfield-height: var(--spectrum-component-height-300);
    --spectrum-textfield-label-spacing-block-quiet: var(--spectrum-field-label-to-component-quiet-extra-large);
    --spectrum-textfield-label-spacing-inline-side-label: var(--spectrum-spacing-200);
    --spectrum-textfield-placeholder-font-size: var(--spectrum-font-size-300);
    --spectrum-textfield-spacing-inline: var(--spectrum-component-edge-to-text-200);
    --spectrum-textfield-icon-size-invalid: var(--spectrum-workflow-icon-size-300);
    --spectrum-textfield-icon-size-valid: var(--spectrum-checkmark-icon-size-300);
    --spectrum-textfield-icon-spacing-inline-end-invalid: var(--spectrum-field-edge-to-alert-icon-extra-large);
    --spectrum-textfield-icon-spacing-inline-end-valid: var(--spectrum-field-edge-to-validation-icon-extra-large);
    --spectrum-textfield-icon-spacing-block-invalid: var(--spectrum-field-top-to-alert-icon-extra-large);
    --spectrum-textfield-icon-spacing-block-valid: var(--spectrum-field-top-to-validation-icon-extra-large);
    --spectrum-textfield-icon-spacing-inline-start-invalid: var(--spectrum-field-text-to-alert-icon-extra-large);
    --spectrum-textfield-icon-spacing-inline-start-valid: var(--spectrum-field-text-to-validation-icon-extra-large);
    --spectrum-textfield-character-count-font-size: var(--spectrum-font-size-200);
    --spectrum-textfield-character-count-spacing-block: var(--spectrum-component-bottom-to-text-200);
    --spectrum-textfield-character-count-spacing-block-quiet: var(
        --spectrum-character-count-to-field-quiet-extra-large
    );
    --spectrum-textfield-character-count-spacing-block-side: var(
        --spectrum-side-label-character-count-top-margin-extra-large
    );

    /* Text Area / Multiline size extra large */
    --spectrum-text-area-min-block-size-quiet: var(--spectrum-component-height-300);
}

/********* TEXT FIELD and TEXT AREA Outer Wrapper *********/
.spectrum-Textfield {
    position: relative;

    /* Edge - Show the overflow for input. */
    overflow: visible;

    /* Grid layout for child components */
    display: inline-grid;
    grid-template-columns: auto auto;
    grid-template-rows: auto auto auto;

    /* prevent input from expanding to width of helptext */
    inline-size: var(--mod-textfield-width, var(--spectrum-textfield-width));

    /* Firefox and Safari - Remove the margin for input. */
    margin: 0;

    /*** ↓ Browser Mitigations for Text Field ↓ ***/

    /* Edge - Use padding instead of text-indent because text-indent does not left align the text  */
    text-indent: 0;

    /* All browsers - Change the input font styles */
    text-overflow: ellipsis;

    /* Firefox -
    Removes the native spin buttons in Firefox; -moz-appearance: none results in spinners.
    This has to come after -webkit-appearance or it gets overridden (#214)
    Details: http://stackoverflow.com/questions/23372903/hide-spinner-in-input-number-firefox-29

    Sets the opacity to 1 as normalize.css sets an opacity to placeholders
    Details: https://github.com/csstools/normalize.css/blob/main/normalize.css#L297
  */
    appearance: textfield;
}

.spectrum-Textfield.spectrum-Textfield--quiet {
    &::after {
        content: "";

        &.is-keyboardFocused,
        &:focus-visible,
        &:focus-within {
            &::after {
                background-color: var(
                    --highcontrast-textfield-focus-indicator-color,
                    var(--mod-textfield-focus-indicator-color, var(--spectrum-textfield-focus-indicator-color))
                );
            }
        }

        /*** Quiet Input Invalid ⚠️ ***/
        &.is-invalid {
            .spectrum-Textfield-input {
                padding-inline-end: calc(
                    var(
                            --mod-textfield-icon-spacing-inline-start-invalid,
                            var(--spectrum-textfield-icon-spacing-inline-start-invalid)
                        ) + var(--mod-textfield-icon-size-invalid, var(--spectrum-textfield-icon-size-invalid))
                );
            }
        }

        /*** Quiet Input Valid ✅ ***/
        &.is-valid {
            .spectrum-Textfield-input {
                padding-inline-end: calc(
                    var(
                            --mod-textfield-icon-spacing-inline-start-valid,
                            var(--spectrum-textfield-icon-spacing-inline-start-valid)
                        ) + var(--mod-textfield-icon-size-valid, var(--spectrum-textfield-icon-size-valid))
                );
            }
        }
    }

    /********* Child Element - Validation Icons - ⚠️ ✅ *********/
    .spectrum-Textfield-validationIcon {
        /* specify validation class or web components will apply this to all icons */
        .spectrum-Textfield.is-valid &,
        .spectrum-Textfield.is-invalid & {
            pointer-events: all;

            position: absolute;
            inset-block-start: 0;

            grid-column: 2;
            grid-row: 2;

            margin-inline-start: auto;
        }

        /****** Validation Icon - Valid ✅ ******/
        .spectrum-Textfield.is-valid & {
            inset-block-start: var(
                --mod-textfield-icon-spacing-block-valid,
                var(--spectrum-textfield-icon-spacing-block-valid)
            );
            inset-block-end: var(
                --mod-textfield-icon-spacing-block-valid,
                var(--spectrum-textfield-icon-spacing-block-valid)
            );
            inset-inline-start: var(
                --mod-textfield-icon-spacing-inline-start-valid,
                var(--spectrum-textfield-icon-spacing-inline-start-valid)
            );
            inset-inline-end: var(
                --mod-textfield-icon-spacing-inline-end-valid,
                var(--spectrum-textfield-icon-spacing-inline-end-valid)
            );

            color: var(
                --highcontrast-textfield-icon-color-valid,
                var(--mod-textfield-icon-color-valid, var(--spectrum-textfield-icon-color-valid))
            );
        }

        .spectrum-Textfield--quiet.is-invalid & {
            inset-inline-end: var(
                --mod-textfield-icon-spacing-inline-end-quiet-invalid,
                var(--spectrum-textfield-icon-spacing-inline-end-quiet-invalid)
            );
        }
    }

    /********* Child Component - Label *********/
    .spectrum-FieldLabel {
        .spectrum-Textfield & {
            grid-column: 1 / span 1;
            grid-row: 1;
            margin-block-end: var(--mod-textfield-label-spacing-block, var(--spectrum-textfield-label-spacing-block));
            padding-inline-start: calc(var(--mod-textfield-corner-radius, var(--spectrum-textfield-corner-radius)) / 2);
        }

        .spectrum-Textfield--quiet & {
            margin-block-end: var(
                --mod-textfield-label-spacing-block-quiet,
                var(--spectrum-textfield-label-spacing-block-quiet)
            );
        }

        .is-disabled & {
            color: var(--spectrum-textfield-text-color-disabled);
        }
    }

    /********* Child Component - Help Text *********/
    .spectrum-HelpText {
        .spectrum-Textfield & {
            grid-column: 1 / span 2;
            grid-row: 3;
            margin-block-start: var(
                --mod-textfield-helptext-spacing-block,
                var(--spectrum-textfield-helptext-spacing-block)
            );
            padding-inline-start: calc(var(--mod-textfield-corner-radius, var(--spectrum-textfield-corner-radius)) / 2);
        }
    }

    /********* Child Element - Character Count *********/
    .spectrum-Textfield-characterCount {
        display: inline-flex;
        grid-column: 2 / span 1;
        grid-row: 1;
        align-items: flex-end;
        justify-content: flex-end;

        inline-size: auto;
        margin-block-end: var(
            --mod-textfield-character-count-spacing-block,
            var(--spectrum-textfield-character-count-spacing-block)
        );
        margin-inline-start: var(
            --mod-textfield-character-count-spacing-inline,
            var(--spectrum-textfield-character-count-spacing-inline)
        );
        margin-inline-end: 0;
        padding-inline-end: calc(var(--mod-textfield-corner-radius, var(--spectrum-textfield-corner-radius)) / 2);

        font-family: var(
            --mod-textfield-character-count-font-family,
            var(--spectrum-textfield-character-count-font-family)
        );
        font-size: var(--mod-textfield-character-count-font-size, var(--spectrum-textfield-character-count-font-size));
        font-weight: var(
            --mod-textfield-character-count-font-weight,
            var(--spectrum-textfield-character-count-font-weight)
        );

        .spectrum-Textfield--quiet & {
            margin-block-end: var(
                --mod-textfield-character-count-spacing-block-quiet,
                var(--spectrum-textfield-character-count-spacing-block-quiet)
            );
        }
    }

    /********* Child Element - Input *********/
    .spectrum-Textfield-input {
        /* place in same cell: input, focus indicator, and grows sizer */
        grid-row: 2;

        box-sizing: border-box;
        inline-size: 100%;
        min-inline-size: var(--mod-textfield-min-width, var(--spectrum-textfield-min-width));
        block-size: var(--mod-textfield-height, var(--spectrum-textfield-height));

        /*** ↓ Browser Mitigations for Input ↓ ***/

        /* Remove the margin for input in Firefox and Safari. */
        margin: 0;
        padding-block-start: calc(
            var(--mod-textfield-spacing-block-start, var(--spectrum-textfield-spacing-block-start)) -
                var(--mod-textfield-border-width, var(--spectrum-textfield-border-width))
        );
        padding-block-end: calc(
            var(--mod-textfield-spacing-block-end, var(--spectrum-textfield-spacing-block-end)) -
                var(--mod-textfield-border-width, var(--spectrum-textfield-border-width))
        );
        padding-inline: calc(
            var(--mod-textfield-spacing-inline, var(--spectrum-textfield-spacing-inline)) -
                var(--mod-textfield-border-width, var(--spectrum-textfield-border-width))
        );

        font-family: var(--mod-textfield-font-family, var(--spectrum-textfield-font-family));
        font-size: var(--mod-textfield-placeholder-font-size, var(--spectrum-textfield-placeholder-font-size));
        font-weight: var(--mod-textfield-font-weight, var(--spectrum-textfield-font-weight));

        /* no mod defined to allow for maximum compatibility */

        /* no mod defined to allow for maximum compatibility */
        line-height: var(--spectrum-textfield-input-line-height);
        color: var(
            --highcontrast-textfield-text-color-default,
            var(--mod-textfield-text-color-default, var(--spectrum-textfield-text-color-default))
        );

        /* Use padding instead of text-indent because text-indent does not left align the text in Edge browser  */

        /* Use padding instead of text-indent because text-indent does not left align the text in Edge browser  */
        text-indent: 0;
        text-overflow: ellipsis; /* used to align them correctly in forms. */
        vertical-align: top; /* used to align them correctly in forms. */

        appearance: none;

        /*
    Removes the native spin buttons in Firefox; -moz-appearance: none results in spinners.
    This has to come after -webkit-appearance or it gets overridden (#214)
    Details: http://stackoverflow.com/questions/23372903/hide-spinner-in-input-number-firefox-29

    Sets the opacity to 1 as normalize.css sets an opacity to placeholders
    Details: https://github.com/csstools/normalize.css/blob/main/normalize.css#L297
  */
        appearance: textfield;
        background-color: var(--mod-textfield-background-color, var(--spectrum-textfield-background-color));
        border: var(--mod-textfield-border-width, var(--spectrum-textfield-border-width)) solid
            var(
                --highcontrast-textfield-border-color,
                var(--mod-textfield-border-color, var(--spectrum-textfield-border-color))
            );
        border-radius: var(--mod-textfield-corner-radius, var(--spectrum-textfield-corner-radius));
        outline: none;

        /* focus indicator is focused state */
        outline: var(--mod-textfield-focus-indicator-width, var(--spectrum-textfield-focus-indicator-width)) solid;
        outline-color: var(
            --highcontrast-textfield-focus-indicator-color,
            var(--mod-textfield-focus-indicator-color, var(--spectrum-textfield-focus-indicator-color))
        );
        outline-offset: var(--mod-textfield-focus-indicator-gap, var(--spectrum-textfield-focus-indicator-gap));

        transition: border-color var(--mod-texfield-animation-duration, var(--spectrum-texfield-animation-duration))
            ease-in-out;

        /* Remove the native clear button in IE */
        /* http://stackoverflow.com/questions/14007655/remove-ie10s-clear-field-x-button-on-certain-inputs */
        &::-ms-clear {
            inline-size: 0;
            block-size: 0;
        }

        /* removes the native spin buttons */

        /* http://stackoverflow.com/questions/23372903/hide-spinner-in-input-number-firefox-29 */
        &::-webkit-inner-spin-button,
        &::-webkit-outer-spin-button {
            margin: 0;
            appearance: none;
        }

        /* stylelint-disable-next-line selector-no-vendor-prefix -- added to work with Edge, note, it needs double :: not single : which is what autoprefixer will add */
        &::-ms-input-placeholder {
            opacity: 100%;
        }

        /*** Input Placeholder Text ***/
        &::placeholder {
            font-family: var(--mod-textfield-font-family, var(--spectrum-textfield-font-family));
            font-size: var(--mod-textfield-placeholder-font-size, var(--spectrum-textfield-placeholder-font-size));
            font-weight: var(--mod-textfield-font-weight, var(--spectrum-textfield-font-weight));
            color: var(
                --highcontrast-textfield-text-color-default,
                var(--mod-textfield-text-color-default, var(--spectrum-textfield-text-color-default))
            );

            opacity: 100%;

            transition: color var(--mod-texfield-animation-duration, var(--spectrum-texfield-animation-duration))
                ease-in-out;
        }

        &::placeholder {
            color: var(
                --highcontrast-textfield-text-color-keyboard-focus,
                var(--mod-textfield-text-color-keyboard-focus, var(--spectrum-textfield-text-color-keyboard-focus))
            );
        }

        /* TODO - quiet search field left padding - reevaluate when search is migrated */
        .spectrum-Textfield--quiet .spectrum-Textfield-icon ~ & {
            padding-inline-start: calc(
                var(--mod-textfield-workflow-icon-gap, var(--spectrum-textfield-workflow-icon-gap)) +
                    var(--mod-textfield-workflow-icon-width, var(--spectrum-textfield-workflow-icon-width))
            );
        }

        /* removes the red border that appears in Firefox */
        &:-moz-ui-invalid {
            box-shadow: none;
        }

        /*** Input Placeholder Text - CJK ***/
        &:lang(ja),
        &:lang(zh),
        &:lang(ko) {
            &::placeholder {
                font-style: normal;
            }

            /* stylelint-disable-next-line selector-no-vendor-prefix -- added to work with Edge, note, it needs double :: not single : which is what autoprefixer will add */
            &::-ms-input-placeholder {
                font-style: normal;
            }
        }

        /* hover */
        .spectrum-Textfield:hover &,
        &:hover {
            color: var(
                --highcontrast-textfield-text-color-hover,
                var(--mod-textfield-text-color-hover, var(--spectrum-textfield-text-color-hover))
            );
            border-color: var(
                --highcontrast-textfield-border-color-hover,
                var(--mod-textfield-border-color-hover, var(--spectrum-textfield-border-color-hover))
            );

            &::placeholder {
                color: var(
                    --highcontrast-textfield-text-color-hover,
                    var(--mod-textfield-text-color-hover, var(--spectrum-textfield-text-color-hover))
                );
            }
        }

        /* mouse focus */
        .is-focused &,
        &:focus {
            color: var(
                --highcontrast-textfield-text-color-focus,
                var(--mod-textfield-text-color-focus, var(--spectrum-textfield-text-color-focus))
            );
            border-color: var(
                --highcontrast-textfield-border-color-focus,
                var(--mod-textfield-border-color-focus, var(--spectrum-textfield-border-color-focus))
            );

            &::placeholder {
                color: var(
                    --highcontrast-textfield-text-color-focus,
                    var(--mod-textfield-text-color-focus, var(--spectrum-textfield-text-color-focus))
                );
            }

            /* focus hover */
            &:hover {
                color: var(
                    --highcontrast-textfield-text-color-focus-hover,
                    var(--mod-textfield-text-color-focus-hover, var(--spectrum-textfield-text-color-focus-hover))
                );
                border-color: var(
                    --highcontrast-textfield-border-color-focus-hover,
                    var(--mod-textfield-border-color-focus-hover, var(--spectrum-textfield-border-color-focus-hover))
                );
            }

            &:hover::placeholder {
                color: var(
                    --highcontrast-textfield-text-color-focus-hover,
                    var(--mod-textfield-text-color-focus-hover, var(--spectrum-textfield-text-color-focus-hover))
                );
            }
        }

        /*** Input Valid ✅ ***/
        .is-valid & {
            padding-inline-end: calc(
                var(
                        --mod-textfield-icon-spacing-inline-start-valid,
                        var(--spectrum-textfield-icon-spacing-inline-start-valid)
                    ) + var(--mod-textfield-icon-size-valid, var(--spectrum-textfield-icon-size-valid)) +
                    var(
                        --mod-textfield-icon-spacing-inline-end-valid,
                        var(--spectrum-textfield-icon-spacing-inline-end-valid)
                    ) - var(--mod-textfield-border-width, var(--spectrum-textfield-border-width))
            );
            color: var(
                --highcontrast-textfield-text-color-valid,
                var(--mod-textfield-text-color-valid, var(--spectrum-textfield-text-color-valid))
            );
        }

        /*** Input Invalid ⚠️ ***/
        .is-invalid & {
            padding-inline-end: calc(
                var(
                        --mod-textfield-icon-spacing-inline-start-invalid,
                        var(--spectrum-textfield-icon-spacing-inline-start-invalid)
                    ) + var(--mod-textfield-icon-size-invalid, var(--spectrum-textfield-icon-size-invalid)) +
                    var(
                        --mod-textfield-icon-spacing-inline-end-invalid,
                        var(--spectrum-textfield-icon-spacing-inline-end-invalid)
                    ) - var(--mod-textfield-border-width, var(--spectrum-textfield-border-width))
            );
            color: var(
                --highcontrast-textfield-text-color-invalid,
                var(--mod-textfield-text-color-invalid, var(--spectrum-textfield-text-color-invalid))
            );
            border-color: var(
                --highcontrast-textfield-border-color-invalid-default,
                var(
                    --mod-textfield-border-color-invalid-default,
                    var(--spectrum-textfield-border-color-invalid-default)
                )
            );
        }
    }

    /*** Input Valid ✅ ***/
    .is-valid & {
        color: var(
            --highcontrast-textfield-text-color-valid,
            var(--mod-textfield-text-color-valid, var(--spectrum-textfield-text-color-valid))
        );
    }

    /*** Input Invalid ⚠️ ***/
    .is-invalid & {
        color: var(
            --highcontrast-textfield-text-color-invalid,
            var(--mod-textfield-text-color-invalid, var(--spectrum-textfield-text-color-invalid))
        );
        border-color: var(
            --highcontrast-textfield-border-color-invalid-default,
            var(--mod-textfield-border-color-invalid-default, var(--spectrum-textfield-border-color-invalid-default))
        );
    }

    /* Invalid hover */
    .is-invalid:hover &,
    .is-invalid &:hover {
        border-color: var(
            --highcontrast-textfield-border-color-invalid-hover,
            var(--mod-textfield-border-color-invalid-hover, var(--spectrum-textfield-border-color-invalid-hover))
        );
    }

    /* Invalid mouse focus */
    .is-invalid.is-focused &,
    .is-invalid:focus &,
    .is-invalid &:focus {
        border-color: var(
            --highcontrast-textfield-border-color-invalid-focus,
            var(--mod-textfield-border-color-invalid-focus, var(--spectrum-textfield-border-color-invalid-focus))
        );

        /* focus hover */
        &:hover {
            border-color: var(
                --highcontrast-textfield-border-color-invalid-focus-hover,
                var(
                    --mod-textfield-border-color-invalid-focus-hover,
                    var(--spectrum-textfield-border-color-invalid-focus-hover)
                )
            );
        }
    }

    /* invalid keyboard focus */
    .is-invalid.is-keyboardFocused &,
    .is-invalid &:focus-visible {
        border-color: var(
            --highcontrast-textfield-border-color-invalid-keyboard-focus,
            var(
                --mod-textfield-border-color-invalid-keyboard-focus,
                var(--spectrum-textfield-border-color-invalid-keyboard-focus)
            )
        );
    }

    /****** Input Disabled 🚫 ******/
    .spectrum-Textfield.is-disabled &,
    .spectrum-Textfield.is-disabled:hover &,
    &:disabled {
        /* Disable the resize functionality when disabled */
        resize: none;

        margin-block-end: var(--mod-textfield-spacing-block-quiet, var(--spectrum-textfield-spacing-block-quiet));
        padding-block-start: var(--mod-textfield-spacing-block-start, var(--spectrum-textfield-spacing-block-start));
        padding-inline: var(--mod-textfield-spacing-inline-quiet, var(--spectrum-textfield-spacing-inline-quiet));

        color: var(
            --highcontrast-textfield-text-color-disabled,
            var(--mod-textfield-text-color-disabled, var(--spectrum-textfield-text-color-disabled))
        );

        background-color: transparent;
        border-radius: 0;

        &::placeholder {
            color: var(
                --highcontrast-textfield-text-color-disabled,
                var(--mod-textfield-text-color-disabled, var(--spectrum-textfield-text-color-disabled))
            );
        }
    }

    /****** Input - Quiet 🤫 ******/
    .spectrum-Textfield--quiet & {
        /* Treat all quiet inputs and text areas the same */
        resize: none;

        overflow-y: hidden;

        margin-block-end: var(--mod-textfield-spacing-block-quiet, var(--spectrum-textfield-spacing-block-quiet));
        padding-block-start: var(--mod-textfield-spacing-block-start, var(--spectrum-textfield-spacing-block-start));
        padding-inline: var(--mod-textfield-spacing-inline-quiet, var(--spectrum-textfield-spacing-inline-quiet));

        background-color: transparent;
        border-block-start-width: 0;
        border-inline-width: 0;
        border-radius: 0;
        outline: none;
    }

    /****** Input - Quiet 🤫 + Disabled 🚫 ******/
    .spectrum-Textfield--quiet.is-disabled &,
    .spectrum-Textfield--quiet.is-disabled:hover &,
    &:disabled {
        color: var(
            --highcontrast-textfield-text-color-disabled,
            var(--mod-textfield-text-color-disabled, var(--spectrum-textfield-text-color-disabled))
        );
        background-color: transparent;
        border-color: var(--mod-textfield-border-color-disabled, var(--spectrum-textfield-border-color-disabled));

        &::placeholder {
            color: var(
                --highcontrast-textfield-text-color-disabled,
                var(--mod-textfield-text-color-disabled, var(--spectrum-textfield-text-color-disabled))
            );
        }
    }

    /****** Input ReadOnly ******/
    .spectrum-Textfield.is-readOnly &,
    .spectrum-Textfield.is-readOnly:hover &,
    &:read-only {
        color: var(
            --highcontrast-textfield-text-color-readonly,
            var(--mod-textfield-text-color-readonly, var(--spectrum-textfield-text-color-readonly))
        );
        background-color: transparent;
        border-color: transparent;
        outline: none;

        &::placeholder {
            color: var(
                --highcontrast-textfield-text-color-readonly,
                var(--mod-textfield-text-color-readonly, var(--spectrum-textfield-text-color-readonly))
            );
            background-color: transparent;
        }
    }
}

/*** Layout Variant - Side Label ***/
.spectrum-Textfield--sideLabel {
    grid-template-columns: auto auto auto;
    grid-template-rows: auto auto;

    /*** Focus Indicator ***/
    &::after {
        grid-column: 2 / span 1;
        grid-row: 1 / span 1;
    }

    .spectrum-FieldLabel {
        grid-column: 1 / span 1;
        grid-row: 1 / span 2;
        margin-inline-end: var(
            --mod-textfield-label-spacing-inline-side-label,
            var(--spectrum-textfield-label-spacing-inline-side-label)
        );
    }

    .spectrum-Textfield-characterCount {
        grid-column: 3 / span 1;
        grid-row: 1;
        align-items: flex-start;

        margin-block-start: var(
            --mod-textfield-character-count-spacing-block-side,
            var(--spectrum-textfield-character-count-spacing-block-side)
        );
        margin-inline-start: var(
            --mod-textfield-character-count-spacing-inline-side,
            var(--spectrum-textfield-character-count-spacing-inline-side)
        );
    }

    .spectrum-HelpText {
        grid-column: 2 / span 1;
        grid-row: 2;
    }

    .spectrum-Textfield-validationIcon {
        grid-column: 2 / span 1;
        grid-row: 1 / span 1;
    }

    .spectrum-Textfield-input {
        grid-column: 2 / span 1;
        grid-row: 1 / span 1;
    }
}

/*** Text Area ***/
.spectrum-Textfield--multiline {
    --spectrum-textfield-input-line-height: normal;

    .spectrum-Textfield-input {
        resize: inherit;
        min-inline-size: var(--mod-text-area-min-inline-size, var(--spectrum-text-area-min-inline-size));
        min-block-size: var(--mod-text-area-min-block-size, var(--spectrum-text-area-min-block-size));
    }

    &.spectrum-Textfield--quiet {
        .spectrum-Textfield-input {
            /* Treat all quiet inputs and text areas the same */
            resize: none;
            overflow-y: hidden;
            min-block-size: var(--mod-text-area-min-block-size-quiet, var(--spectrum-text-area-min-block-size-quiet));
        }
    }
}

/********* WHCM *********/
@media (forced-colors: active) {
    .spectrum-Textfield {
        --highcontrast-textfield-border-color-hover: Highlight;
        --highcontrast-textfield-border-color-focus: Highlight;
        --highcontrast-textfield-border-color-keyboard-focus: CanvasText;
        --highcontrast-textfield-focus-indicator-color: Highlight;

        --highcontrast-textfield-border-color-invalid-default: Highlight;
        --highcontrast-textfield-border-color-invalid-hover: Highlight;
        --highcontrast-textfield-border-color-invalid-focus: Highlight;
        --highcontrast-textfield-border-color-invalid-keyboard-focus: Highlight;

        --highcontrast-textfield-text-color-valid: CanvasText;
        --highcontrast-textfield-text-color-invalid: CanvasText;

        .spectrum-Textfield-input {
            --highcontrast-textfield-text-color-default: CanvasText;
            --highcontrast-textfield-text-color-hover: CanvasText;
            --highcontrast-textfield-text-color-keyboard-focus: CanvasText;
            --highcontrast-textfield-text-color-disabled: GrayText;
            --highcontrast-textfield-text-color-readonly: CanvasText;

            &::placeholder {
                --highcontrast-textfield-text-color-default: GrayText;
                --highcontrast-textfield-text-color-hover: GrayText;
                --highcontrast-textfield-text-color-keyboard-focus: GrayText;
                --highcontrast-textfield-text-color-disabled: GrayText;
                --highcontrast-textfield-text-color-readonly: CanvasText;
            }
        }
    }
}
